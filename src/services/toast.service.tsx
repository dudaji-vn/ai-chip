import { createPortal } from "react-dom";

interface ToastOptions {
    type?: 'success' | 'error' | 'warning' | 'info';
    message: string;
    timeout?: number;
}

export const toast = ({ type = 'success', message, timeout = 3000 }: ToastOptions) => {
    let toastContainer = document.getElementById('toast-container')
    
    if(!toastContainer) {
        const toastContainer = document.createElement('div')
        toastContainer.id = 'toast-container'
        toastContainer.className = 'fixed bottom-4 right-4 z-50 flex flex-col gap-2 p-4'
        document.body.appendChild(toastContainer)
    }
    toastContainer = document.getElementById('toast-container')
    if(!toastContainer) return

    const icons = {
        'success': `<svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M10 3C8.51664 3 7.06659 3.43987 5.83323 4.26398C4.59986 5.08809 3.63856 6.25943 3.07091 7.62987C2.50325 9.00032 2.35472 10.5083 2.64411 11.9632C2.9335 13.418 3.64781 14.7544 4.6967 15.8033C5.7456 16.8522 7.08197 17.5665 8.53682 17.8559C9.99168 18.1453 11.4997 17.9967 12.8701 17.4291C14.2406 16.8614 15.4119 15.9001 16.236 14.6668C17.0601 13.4334 17.5 11.9834 17.5 10.5C17.4978 8.51154 16.7069 6.60516 15.3009 5.19911C13.8948 3.79306 11.9885 3.00218 10 3ZM12.7803 9.53025L9.78025 12.5302C9.63961 12.6708 9.44888 12.7498 9.25 12.7498C9.05113 12.7498 8.8604 12.6708 8.71975 12.5302L7.21975 11.0302C7.08313 10.8888 7.00754 10.6993 7.00925 10.5027C7.01096 10.306 7.08983 10.1179 7.22889 9.97888C7.36794 9.83983 7.55605 9.76095 7.7527 9.75924C7.94935 9.75753 8.1388 9.83313 8.28025 9.96975L9.25 10.9395L11.7198 8.46975C11.8612 8.33313 12.0507 8.25753 12.2473 8.25924C12.444 8.26095 12.6321 8.33983 12.7711 8.47888C12.9102 8.61794 12.989 8.80605 12.9908 9.0027C12.9925 9.19934 12.9169 9.3888 12.7803 9.53025Z" fill="#0E9F6E"/>
        </svg>`,
        'error': `<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M10 2.5C8.51664 2.5 7.06659 2.93987 5.83323 3.76398C4.59986 4.58809 3.63856 5.75943 3.07091 7.12987C2.50325 8.50032 2.35472 10.0083 2.64411 11.4632C2.9335 12.918 3.64781 14.2544 4.6967 15.3033C5.7456 16.3522 7.08197 17.0665 8.53683 17.3559C9.99168 17.6453 11.4997 17.4967 12.8701 16.9291C14.2406 16.3614 15.4119 15.4001 16.236 14.1668C17.0601 12.9334 17.5 11.4834 17.5 10C17.4978 8.01154 16.7069 6.10516 15.3009 4.69911C13.8948 3.29306 11.9885 2.50218 10 2.5ZM12.7803 11.7197C12.8519 11.7889 12.909 11.8717 12.9483 11.9632C12.9876 12.0547 13.0083 12.1531 13.0092 12.2527C13.0101 12.3523 12.9911 12.451 12.9534 12.5432C12.9157 12.6354 12.86 12.7191 12.7895 12.7895C12.7191 12.86 12.6354 12.9157 12.5432 12.9534C12.451 12.9911 12.3523 13.0101 12.2527 13.0092C12.1531 13.0083 12.0547 12.9876 11.9632 12.9483C11.8717 12.909 11.7889 12.8519 11.7198 12.7802L10 11.0605L8.28025 12.7802C8.1388 12.9169 7.94935 12.9925 7.7527 12.9908C7.55605 12.989 7.36794 12.9102 7.22889 12.7711C7.08983 12.6321 7.01096 12.4439 7.00925 12.2473C7.00754 12.0507 7.08313 11.8612 7.21975 11.7197L8.9395 10L7.21975 8.28025C7.08313 8.1388 7.00754 7.94935 7.00925 7.7527C7.01096 7.55605 7.08983 7.36794 7.22889 7.22888C7.36794 7.08983 7.55605 7.01095 7.7527 7.00924C7.94935 7.00753 8.1388 7.08313 8.28025 7.21975L10 8.9395L11.7198 7.21975C11.8612 7.08313 12.0507 7.00753 12.2473 7.00924C12.444 7.01095 12.6321 7.08983 12.7711 7.22888C12.9102 7.36794 12.989 7.55605 12.9908 7.7527C12.9925 7.94935 12.9169 8.1388 12.7803 8.28025L11.0605 10L12.7803 11.7197Z" fill="#F05252"/>
        </svg>
        `,
        'warning': "",
        'info': "",
    }

    let toastItem = document.createElement('div')
    toastItem.className = 'flex items-center justify-center p-4 max-w-[386px] bg-gray-800 rounded-md toast-item'
    toastItem.innerHTML = `
        ${icons[type] || ''}
        <span class='block w-[1px] bg-gray-600 mr-4 ml-[10px] h-[21px]'></span>
        <span class='text-sm text-white'>${message || ''}</span>
    `
    toastContainer.appendChild(toastItem)

    setTimeout(() => {
        toastContainer?.removeChild(toastItem)
    }, timeout)

}